!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var o in i)("object"==typeof exports?exports:e)[o]=i[o]}}(window,(function(){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=2)}([function(e,t,i){"use strict";function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.MenuAim=void 0;var n=i(1),s=[],u=0,r=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.activeRow=null,this.lastDelayLoc=null,this.timeoutId=null,this.exitTimeoutID=null,this.options=null,this.menu=null,this.nestedElementArr=[];var o=function(){};i=i||{},this.options={rowSelector:i.rowSelector||"> li",exitDelay:i.exitDelay||null,submenuSelector:i.submenuSelector||"*",submenuDirection:i.submenuDirection||n.MenuDirection.right,tolerance:i.tolerance||75,isRoot:i.isRoot||!0,enter:i.enter||o,exit:i.exit||o,activate:i.activate||o,deactivate:i.deactivate||o,exitMenu:i.exitMenu||o,clickRow:i.clickRow||o},this.mouseenterRow=this.mouseenterRow.bind(this),this.mouseleaveRow=this.mouseleaveRow.bind(this),this.clickRow=this.clickRow.bind(this),this.mouseleaveMenu=this.mouseleaveMenu.bind(this),this.commitExit=this.commitExit.bind(this),this.attach(t)}var t,i,r;return t=e,(i=[{key:"attach",value:function(e){var t=this;this.menu=e,this.nestedElementArr=Array.from(this.menu.parentNode.querySelectorAll(".".concat(this.menu.classList[0]," ").concat(this.options.rowSelector))),this.nestedElementArr.forEach((function(e){e.addEventListener("mousemove",t.mouseenterRow)})),this.options.isRoot&&this.menu.addEventListener("mouseleave",this.mouseleaveMenu),1==++u&&document.addEventListener("mousemove",a)}},{key:"mouseleaveMenu",value:function(e){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.options.exitDelay?(this.exitTimeoutID&&(clearTimeout(this.exitTimeoutID),this.exitTimeoutID=null),this.exitTimeoutID=setTimeout(this.commitExit,this.options.exitDelay)):this.commitExit()}},{key:"forceExit",value:function(){this.exitTimeoutID&&clearTimeout(this.exitTimeoutID),this.commitExit()}},{key:"commitExit",value:function(){this.timeoutId=this.exitTimeoutID=null,this.options.exitMenu(this)&&(this.activeRow&&this.options.deactivate(this.activeRow),this.activeRow=null)}},{key:"mouseenterRow",value:function(e){this.exitTimeoutID&&(clearTimeout(this.exitTimeoutID),this.exitTimeoutID=null),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.options.enter(e.currentTarget),this.possiblyActivate(e.currentTarget)}},{key:"mouseleaveRow",value:function(e){this.options.exit(e.currentTarget)}},{key:"clickRow",value:function(e){e.currentTarget!==this.activeRow&&this.activate(e.currentTarget),this.options.clickRow(e,e.currentTarget)}},{key:"activate",value:function(e){if(e!=this.activeRow){this.activeRow&&this.options.deactivate(this.activeRow);var t=this.options.activate(e);this.activeRow=t||e}}},{key:"possiblyActivate",value:function(e){var t=this.activationDelay(),i=this;t?this.timeoutId=setTimeout((function(){i.possiblyActivate(e)}),t):this.activate(e)}},{key:"activationDelay",value:function(){var e=!1;if(this.activeRow)for(var t=this.activeRow.parentElement.querySelectorAll(this.options.submenuSelector),i=0,o=t.length;i<o;i++)if(t[i]===this.activeRow){e=!0;break}if(!e)return 0;var u=c(this.menu),r={x:u.left,y:u.top-this.options.tolerance},a={x:u.left+this.menu.offsetWidth,y:r.y},h={x:u.left,y:u.top+this.menu.offsetHeight+this.options.tolerance},m={x:u.left+this.menu.offsetWidth,y:h.y},v=s[s.length-1],f=s[0];if(!v)return 0;if(f||(f=v),f.x<u.left||f.x>m.x||f.y<u.top||f.y>m.y)return 0;if(this.lastDelayLoc&&v.x==this.lastDelayLoc.x&&v.y==this.lastDelayLoc.y)return 0;var d=a,y=m;this.options.submenuDirection==n.MenuDirection.left?(d=h,y=r):this.options.submenuDirection==n.MenuDirection.below?(d=m,y=h):this.options.submenuDirection==n.MenuDirection.above&&(d=r,y=a);var p=l(v,d),w=l(v,y),x=l(f,d),b=l(f,y);return p<x&&w>b?(this.lastDelayLoc=v,300):(this.lastDelayLoc=null,0)}},{key:"hookUp",value:function(e){this.nestedElementArr.push(e),e.addEventListener("mouseenter",this.mouseenterRow),e.addEventListener("mouseleave",this.mouseleaveRow),e.addEventListener("click",this.clickRow)}},{key:"setActiveRow",value:function(e){this.activeRow=e,this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=null),this.exitTimeoutID&&(window.clearTimeout(this.exitTimeoutID),this.exitTimeoutID=null)}},{key:"deactivateRow",value:function(){this.activeRow&&this.options.deactivate(this.activeRow),this.activeRow=null}},{key:"detach",value:function(){var e=this;this.menu&&(this.timeoutId&&clearTimeout(this.timeoutId),this.nestedElementArr.forEach((function(t){t.removeEventListener("mousemove",e.mouseenterRow)})),0==--u&&document.removeEventListener("mousemove",a),this.options.isRoot&&this.menu.removeEventListener("mouseleave",this.mouseleaveMenu),this.timeoutId=this.lastDelayLoc=this.activeRow=this.menu=null)}}])&&o(t.prototype,i),r&&o(t,r),e}();t.MenuAim=r;var a=function(e){s.push({x:e.pageX,y:e.pageY}),s.length>3&&s.shift()},l=function(e,t){return(t.y-e.y)/(t.x-e.x)},c=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument.defaultView;return{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}}},function(e,t,i){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.MenuDirection=void 0,function(e){e.left="left",e.right="right",e.below="below",e.above="above"}(o||(o={})),t.MenuDirection=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),new(i(0).MenuAim)(document.querySelector(".list"),{activate:function(e){e.classList.add("list__el_active")},deactivate:function(e){console.log("deactivation"),e.classList.remove("list__el_active")},exitMenu:function(e){return console.log("exit from the menu"),!0},rowSelector:"> .list__el_nested"})}])}));
//# sourceMappingURL=script.js.map